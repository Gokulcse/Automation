package pages;


import java.util.List;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.ie.InternetExplorerDriver;
import org.testng.annotations.BeforeTest;
import org.testng.annotations.Test;

import utilitymethods.UtilityMethods;

public class EmailIntegration 
{
 public static	String BrowserForUse="IE";
 public static WebDriver driver;	
 
 @BeforeTest
	public static void DeleteAllEmail()
	{
		if (BrowserForUse.equals("FireFox"))
		{
			System.setProperty("webdriver.firefox.marionette", System.getProperty("user.dir")+ "\\libs\\geckodriver.exe");
			driver = new FirefoxDriver();
			driver.manage().window().maximize();
			System.out.println("Mozilla FireFox browser launched");
		}
		else if (BrowserForUse.equals("Chrome"))
		{
			System.setProperty("webdriver.chrome.driver", System.getProperty("user.dir")+ "\\libs\\chromedriver.exe");
			driver = new ChromeDriver();
			driver.manage().window().maximize();
			System.out.println("Chrome browser launched");
		}
		else if (BrowserForUse.equals("IE"))
		{
			System.setProperty("webdriver.ie.driver", System.getProperty("user.dir")+ "\\libs\\IEDriverServer.exe");
			driver = new InternetExplorerDriver();
			driver.manage().window().maximize();
			System.out.println("Internet Explorer browser launched");
		}
		else
		{
			System.setProperty("webdriver.firefox.marionette", System.getProperty("user.dir")+ "\\libs\\geckodriver.exe");
			driver = new FirefoxDriver();
			driver.manage().window().maximize();
			System.out.println("Default browser is Mozilla FireFox is launched");
		}
		
		driver.get("https://mail.google.com/mail/?tab=wm");
		UtilityMethods.sleep(4000);
		driver.findElement(By.id("Email")).sendKeys("automateselenium1");
		driver.findElement(By.id("next")).click();  
		UtilityMethods.sleep(2000);
		driver.findElement(By.id("Passwd")).sendKeys("Automation@Selenium");
		driver.findElement(By.id("signIn")).click();
		UtilityMethods.sleep(20000);
		System.out.println("Mail Opened");
		System.out.println("Delete all check box is displayed :: "+driver.findElement(By.xpath("//div[@aria-label='Select']")).isDisplayed()+"");
		System.out.println("Delete all check box is Enabled   :: "+driver.findElement(By.xpath("//div[@aria-label='Select']")).isEnabled()+"");
		List<WebElement> unreademeil = driver.findElements(By.xpath("//*[@class='zF']"));
		String MyMailer = "orders";
		for(int i=0;i<unreademeil.size();i++)
		{
		    if(unreademeil.get(i).isDisplayed()==true)
		    {
		        if(unreademeil.get(i).getText().equals(MyMailer))
		        {
		        	driver.findElement(By.xpath("//div[@aria-label='Select']")).click();
		       	 	UtilityMethods.sleep(4000);
		       	 	System.out.println("Check box selected");
		            System.out.println("Yes we have got mail form " + MyMailer);
		            System.out.println("Delet button is displayed :: "+driver.findElement(By.xpath("//div[@aria-label='Delete']")).isDisplayed()+"");
		        	System.out.println("Delete button is Enabled   :: "+driver.findElement(By.xpath("//div[@aria-label='Delete']")).isEnabled()+"");
		        	driver.findElement(By.xpath("//div[@aria-label='Delete']")).click();
		        	UtilityMethods.sleep(4000);
		        	System.out.println("Delete Button Clicked");
		        	System.out.println("Deleted All Inbox Emails");
		        }
		        else
		        {
		        	System.out.println("No mail form " + MyMailer);
		        }
		    }
		    else
		    {
		    	System.out.println("No mail form " + MyMailer);
		    }
		}
		System.out.println("No mail form " + MyMailer);
		driver.close();
}

@Test(priority=1)
public static void CheckEmailReceived()
{
	System.setProperty("webdriver.firefox.marionette", System.getProperty("user.dir")+ "\\libs\\geckodriver.exe");
	WebDriver driver = new FirefoxDriver();
	driver.manage().window().maximize();
	driver.get("https://mail.google.com/mail/?tab=wm");
	UtilityMethods.sleep(4000);
	driver.findElement(By.id("Email")).sendKeys("automateselenium1");
	driver.findElement(By.id("next")).click();
	 UtilityMethods.sleep(2000);
	driver.findElement(By.id("Passwd")).sendKeys("Automation@Selenium");
	driver.findElement(By.id("signIn")).click();
	 UtilityMethods.sleep(20000);
	System.out.println("INBOX Opened");
	List<WebElement> unreademeil = driver.findElements(By.xpath("//*[@class='zF']"));
	String MyMailer = "orders";
	for(int i=0;i<unreademeil.size();i++)
	{
	    if(unreademeil.get(i).isDisplayed()==true)
	    {
	        if(unreademeil.get(i).getText().equals(MyMailer))
	        {
	            System.out.println("Yes we have got mail form " + MyMailer);
	        }
	        else
	        {
	            System.out.println("No mail form " + MyMailer);
	        }
	    }
	    else
        {
            System.out.println("No mail form " + MyMailer);
        }
	}
	driver.close();
}



public static String ccURL() 
{
	System.setProperty("webdriver.firefox.marionette", System.getProperty("user.dir")+ "\\libs\\geckodriver.exe");
	WebDriver driver = new FirefoxDriver();
	driver.manage().window().maximize();
	driver.get("https://mail.google.com/mail/?tab=wm");
	UtilityMethods.sleep(4000);
	driver.findElement(By.id("Email")).sendKeys("automateselenium1");
	driver.findElement(By.id("next")).click();
	 UtilityMethods.sleep(2000);
	driver.findElement(By.id("Passwd")).sendKeys("Automation@Selenium");
	driver.findElement(By.id("signIn")).click();
	 UtilityMethods.sleep(20000);
	System.out.println("INBOX Opened");
	System.out.println("Order Mail is displayed :: "+driver.findElement(By.xpath("//div[@class='UI']")).isDisplayed()+"");
	System.out.println("Order Mail is Enabled   :: "+driver.findElement(By.xpath("//div[@class='UI']")).isEnabled()+"");
	driver.findElement(By.xpath("//div[@class='UI']")).click();
	System.out.println("Mail Opened");
	UtilityMethods.sleep(5000);
	System.out.println("sub Mail is displayed :: "+driver.findElement(By.xpath("//a[text()='http://bell.m2m.com ']")).isDisplayed()+"");
	System.out.println("sub Mail is Enabled   :: "+driver.findElement(By.xpath("//a[text()='http://bell.m2m.com ']")).isEnabled()+"");
	String CCURL = driver.findElement(By.xpath("//a[text()='http://bell.m2m.com ']")).getAttribute("href");
	System.out.println("Control Center URL ::"+CCURL+"");	
	driver.close();
    return CCURL;
}


@BeforeTest
public static void Temp()
{
	System.setProperty("webdriver.firefox.marionette", System.getProperty("user.dir")+ "\\libs\\geckodriver.exe");
	WebDriver driver = new FirefoxDriver();
	driver.manage().window().maximize();
	driver.get("https://mail.google.com/mail/?tab=wm");
	UtilityMethods.sleep(4000);
	driver.findElement(By.id("Email")).sendKeys("automateselenium1");
	driver.findElement(By.id("next")).click();
	 UtilityMethods.sleep(2000);
	driver.findElement(By.id("Passwd")).sendKeys("Automation@Selenium");
	driver.findElement(By.id("signIn")).click();
	 UtilityMethods.sleep(20000);
	System.out.println("INBOX Opened");
	System.out.println("Order Mail is displayed :: "+driver.findElement(By.xpath("//div[@class='UI']")).isDisplayed()+"");
	System.out.println("Order Mail is Enabled   :: "+driver.findElement(By.xpath("//div[@class='UI']")).isEnabled()+"");
	driver.findElement(By.xpath("//div[@class='UI']")).click();
	System.out.println("Mail Opened");
	UtilityMethods.sleep(2000);
	String temp =driver.findElement(By.tagName("body")).getText();
	System.out.println(""+temp);
	}
}